{"numTotalTestSuites":58,"numPassedTestSuites":58,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":48,"numPassedTests":48,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":1,"total":1,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1759190861371,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Minimal auth gate (AUTH_ENABLED=1)"],"fullName":"Minimal auth gate (AUTH_ENABLED=1) GET /draft-flows requires token: 401 missing, 403 wrong, 200 correct","status":"passed","title":"GET /draft-flows requires token: 401 missing, 403 wrong, 200 correct","duration":20.151665999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Minimal auth gate (AUTH_ENABLED=1)"],"fullName":"Minimal auth gate (AUTH_ENABLED=1) GET /stream (real) requires token: 401 missing, 403 wrong, 200 correct","status":"passed","title":"GET /stream (real) requires token: 401 missing, 403 wrong, 200 correct","duration":16.471625000000017,"failureMessages":[],"meta":{}}],"startTime":1759190863378,"endTime":1759190863415.4717,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/auth.minimal.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: SSE event schema"],"fullName":"Contracts: SSE event schema emits events from the final set","status":"passed","title":"emits events from the final set","duration":11.252749999999992,"failureMessages":[],"meta":{}}],"startTime":1759190863893,"endTime":1759190863904.2527,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.events.schema.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: HEAD mirrors GET caching headers exactly"],"fullName":"Contracts: HEAD mirrors GET caching headers exactly cache-control, etag, vary, content-type, content-length identical; HEAD has no body","status":"passed","title":"cache-control, etag, vary, content-type, content-length identical; HEAD has no body","duration":15.970332999999982,"failureMessages":[],"meta":{}}],"startTime":1759190862659,"endTime":1759190862674.9702,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.head.strict-parity.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: health shape"],"fullName":"Contracts: health shape exposes minimal shape and required keys","status":"passed","title":"exposes minimal shape and required keys","duration":7.682208999999943,"failureMessages":[],"meta":{}}],"startTime":1759190863747,"endTime":1759190863754.6821,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.health.shape.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: /health payload size < 4 KiB"],"fullName":"Contracts: /health payload size < 4 KiB stays small to avoid drift","status":"passed","title":"stays small to avoid drift","duration":20.442166999999927,"failureMessages":[],"meta":{}}],"startTime":1759190862155,"endTime":1759190862175.4421,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.health.size.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: 429 headers (Retry-After, X-RateLimit-Reset)"],"fullName":"Contracts: 429 headers (Retry-After, X-RateLimit-Reset) includes numeric Retry-After and sane X-RateLimit-Reset","status":"passed","title":"includes numeric Retry-After and sane X-RateLimit-Reset","duration":13.233292000000006,"failureMessages":[],"meta":{}}],"startTime":1759190862814,"endTime":1759190862827.2334,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.rate-limit.headers.test.ts"},{"assertionResults":[{"ancestorTitles":["Contracts: Report v1 schema"],"fullName":"Contracts: Report v1 schema GET /draft-flows returns schema:\"report.v1\" and meta.seed","status":"passed","title":"GET /draft-flows returns schema:\"report.v1\" and meta.seed","duration":10.739000000000033,"failureMessages":[],"meta":{}}],"startTime":1759190863697,"endTime":1759190863707.739,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts.report.schema.test.ts"},{"assertionResults":[{"ancestorTitles":["CORS CSV parser"],"fullName":"CORS CSV parser parses and normalises a single origin","status":"passed","title":"parses and normalises a single origin","duration":1.437749999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["CORS CSV parser"],"fullName":"CORS CSV parser parses multiple origins with spaces and ports","status":"passed","title":"parses multiple origins with spaces and ports","duration":0.27941699999999514,"failureMessages":[],"meta":{}},{"ancestorTitles":["CORS CSV parser"],"fullName":"CORS CSV parser forbids wildcard by default","status":"passed","title":"forbids wildcard by default","duration":0.6397499999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["CORS CSV parser"],"fullName":"CORS CSV parser allows wildcard when CORS_DEV=1","status":"passed","title":"allows wildcard when CORS_DEV=1","duration":0.3826249999999902,"failureMessages":[],"meta":{}}],"startTime":1759190864146,"endTime":1759190864148.6396,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/cors.parser.test.ts"},{"assertionResults":[{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases INVALID_TEMPLATE → 404 BAD_INPUT with catalogue phrase","status":"passed","title":"INVALID_TEMPLATE → 404 BAD_INPUT with catalogue phrase","duration":7.308459000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases INVALID_SEED → 404 BAD_INPUT with catalogue phrase","status":"passed","title":"INVALID_SEED → 404 BAD_INPUT with catalogue phrase","duration":2.7930000000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases BAD_QUERY_PARAMS → 400 BAD_INPUT with catalogue phrase","status":"passed","title":"BAD_QUERY_PARAMS → 400 BAD_INPUT with catalogue phrase","duration":4.437832999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases TIMEOUT → 504 with catalogue phrase","status":"passed","title":"TIMEOUT → 504 with catalogue phrase","duration":3.44987500000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases RETRYABLE → 503 with catalogue phrase and retryable=true","status":"passed","title":"RETRYABLE → 503 with catalogue phrase and retryable=true","duration":2.3997499999999263,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases INTERNAL → 500 with generic phrase (no stack)","status":"passed","title":"INTERNAL → 500 with generic phrase (no stack)","duration":2.460209000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error taxonomy: stable types and catalogue phrases"],"fullName":"Error taxonomy: stable types and catalogue phrases RATE_LIMIT → 429 with Retry-After and catalogue phrase","status":"passed","title":"RATE_LIMIT → 429 with Retry-After and catalogue phrase","duration":340.068166,"failureMessages":[],"meta":{}}],"startTime":1759190861960,"endTime":1759190862323.068,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/error.taxonomy.test.ts"},{"assertionResults":[{"ancestorTitles":["Caching: ETag/304 and HEAD parity"],"fullName":"Caching: ETag/304 and HEAD parity GET 200 -> GET 304 via If-None-Match; HEAD mirrors ETag/Vary","status":"passed","title":"GET 200 -> GET 304 via If-None-Match; HEAD mirrors ETag/Vary","duration":17.79374999999999,"failureMessages":[],"meta":{}}],"startTime":1759190863678,"endTime":1759190863695.7937,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/etag.head.parity.test.ts"},{"assertionResults":[{"ancestorTitles":["Health payload size guard (< 4 KiB)"],"fullName":"Health payload size guard (< 4 KiB) stays small to avoid drift","status":"passed","title":"stays small to avoid drift","duration":4.744124999999997,"failureMessages":[],"meta":{}}],"startTime":1759190862902,"endTime":1759190862906.7441,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/health.size.test.ts"},{"assertionResults":[{"ancestorTitles":["Streaming: limited event under pressure"],"fullName":"Streaming: limited event under pressure emits limited event and closes","status":"passed","title":"emits limited event and closes","duration":7.152833999999984,"failureMessages":[],"meta":{}}],"startTime":1759190863099,"endTime":1759190863106.1528,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/limited-event.test.ts"},{"assertionResults":[{"ancestorTitles":["Metrics: enriched fields behind METRICS=1"],"fullName":"Metrics: enriched fields behind METRICS=1 exposes current_streams and last_heartbeat_ms keys","status":"passed","title":"exposes current_streams and last_heartbeat_ms keys","duration":5.58133399999997,"failureMessages":[],"meta":{}}],"startTime":1759190862615,"endTime":1759190862620.5813,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/metrics.enriched.test.ts"},{"assertionResults":[{"ancestorTitles":["Metrics endpoint (gated)"],"fullName":"Metrics endpoint (gated) absent when METRICS unset","status":"passed","title":"absent when METRICS unset","duration":358.451917,"failureMessages":[],"meta":{}},{"ancestorTitles":["Metrics endpoint (gated)"],"fullName":"Metrics endpoint (gated) exposes counters and draft p95s when METRICS=1","status":"passed","title":"exposes counters and draft p95s when METRICS=1","duration":304.32062500000006,"failureMessages":[],"meta":{}}],"startTime":1759190861672,"endTime":1759190862335.3206,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/metrics.shape.test.ts"},{"assertionResults":[{"ancestorTitles":["OpenAPI dev route (gated)"],"fullName":"OpenAPI dev route (gated) serves /openapi.json when OPENAPI_DEV=1","status":"passed","title":"serves /openapi.json when OPENAPI_DEV=1","duration":377.71625000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["OpenAPI dev route (gated)"],"fullName":"OpenAPI dev route (gated) is absent (404) without OPENAPI_DEV","status":"passed","title":"is absent (404) without OPENAPI_DEV","duration":288.313167,"failureMessages":[],"meta":{}},{"ancestorTitles":["OpenAPI dev route (gated)"],"fullName":"OpenAPI dev route (gated) returns 500 when spec is missing via OPENAPI_SPEC_PATH override","status":"passed","title":"returns 500 when spec is missing via OPENAPI_SPEC_PATH override","duration":286.25312500000007,"failureMessages":[],"meta":{}}],"startTime":1759190861643,"endTime":1759190862595.2532,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/openapi.dev-route.test.ts"},{"assertionResults":[{"ancestorTitles":["pack-locate --json"],"fullName":"pack-locate --json prints a JSON object with path:string","status":"passed","title":"prints a JSON object with path:string","duration":41.694458,"failureMessages":[],"meta":{}}],"startTime":1759190863992,"endTime":1759190864033.6943,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/pack.locate.json.test.ts"},{"assertionResults":[{"ancestorTitles":["Pack manifest schema validator"],"fullName":"Pack manifest schema validator accepts a minimal valid manifest","status":"passed","title":"accepts a minimal valid manifest","duration":123.05154200000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Pack manifest schema validator"],"fullName":"Pack manifest schema validator rejects a malformed manifest (missing files)","status":"passed","title":"rejects a malformed manifest (missing files)","duration":109.18825000000004,"failureMessages":[],"meta":{}}],"startTime":1759190863077,"endTime":1759190863309.1882,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/pack.manifest.schema.test.ts"},{"assertionResults":[{"ancestorTitles":["Perf/limits: 429 with Retry-After"],"fullName":"Perf/limits: 429 with Retry-After 429 includes Retry-After within a sane bound","status":"passed","title":"429 includes Retry-After within a sane bound","duration":8.232500000000016,"failureMessages":[],"meta":{}}],"startTime":1759190862811,"endTime":1759190862819.2324,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/perf.rate-limit.test.ts"},{"assertionResults":[{"ancestorTitles":["SDK checksum guard (seed 4242)"],"fullName":"SDK checksum guard (seed 4242) GET /draft-flows (pricing_change, seed 4242) matches fixture bytes","status":"passed","title":"GET /draft-flows (pricing_change, seed 4242) matches fixture bytes","duration":6.771333000000027,"failureMessages":[],"meta":{}}],"startTime":1759190863801,"endTime":1759190863807.7712,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/sdk.checksum.guard.test.ts"},{"assertionResults":[{"ancestorTitles":["Security headers + prod test routes guard"],"fullName":"Security headers + prod test routes guard GET /draft-flows carries security headers","status":"passed","title":"GET /draft-flows carries security headers","duration":9.529832999999996,"failureMessages":[],"meta":{}}],"startTime":1759190863946,"endTime":1759190863955.5298,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/security.headers.test.ts"},{"assertionResults":[{"ancestorTitles":["Security: no payload or query-string logging"],"fullName":"Security: no payload or query-string logging does not log query strings or obvious payload tokens","status":"passed","title":"does not log query strings or obvious payload tokens","duration":373.157833,"failureMessages":[],"meta":{}}],"startTime":1759190862020,"endTime":1759190862393.1577,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/security.no-logging.test.ts"},{"assertionResults":[{"ancestorTitles":["Security: prod guard for test routes"],"fullName":"Security: prod guard for test routes fails fast when TEST_ROUTES=1 and NODE_ENV=production","status":"passed","title":"fails fast when TEST_ROUTES=1 and NODE_ENV=production","duration":153.091917,"failureMessages":[],"meta":{}}],"startTime":1759190863913,"endTime":1759190864066.0918,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/security.prod-guard.test.ts"},{"assertionResults":[{"ancestorTitles":["Stream: cancel idempotency"],"fullName":"Stream: cancel idempotency pre-token cancel emits cancelled and closes; second cancel is no-op","status":"passed","title":"pre-token cancel emits cancelled and closes; second cancel is no-op","duration":122.84408299999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Stream: cancel idempotency"],"fullName":"Stream: cancel idempotency mid-stream cancel emits cancelled once","status":"passed","title":"mid-stream cancel emits cancelled once","duration":33.287124999999946,"failureMessages":[],"meta":{}}],"startTime":1759190862054,"endTime":1759190862210.287,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.cancel.test.ts"},{"assertionResults":[{"ancestorTitles":["Real Stream: heartbeat comment when idle"],"fullName":"Real Stream: heartbeat comment when idle emits : ping comment within ~1s when idle before tokens","status":"passed","title":"emits : ping comment within ~1s when idle before tokens","duration":4820.3105000000005,"failureMessages":[],"meta":{}}],"startTime":1759190862018,"endTime":1759190866838.3105,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.real.heartbeat.test.ts"},{"assertionResults":[{"ancestorTitles":["Real Stream: backpressure maps to limited and closes"],"fullName":"Real Stream: backpressure maps to limited and closes emits terminal limited event then closes","status":"passed","title":"emits terminal limited event then closes","duration":7.431874999999991,"failureMessages":[],"meta":{}}],"startTime":1759190863280,"endTime":1759190863287.432,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.real.limited.test.ts"},{"assertionResults":[{"ancestorTitles":["Stream: resume once on single blip; no dupes"],"fullName":"Stream: resume once on single blip; no dupes reconnects once after blip with Last-Event-ID, no dupes","status":"passed","title":"reconnects once after blip with Last-Event-ID, no dupes","duration":25.85979199999997,"failureMessages":[],"meta":{}}],"startTime":1759190863142,"endTime":1759190863167.8599,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.resume.test.ts"},{"assertionResults":[{"ancestorTitles":["Stream retryable error is test-routes only"],"fullName":"Stream retryable error is test-routes only ignores ?fail=RETRYABLE when TEST_ROUTES=0","status":"passed","title":"ignores ?fail=RETRYABLE when TEST_ROUTES=0","duration":22.692583999999954,"failureMessages":[],"meta":{}}],"startTime":1759190863160,"endTime":1759190863182.6926,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.retryable.isolation.test.ts"},{"assertionResults":[{"ancestorTitles":["Stream: retryable error smoke"],"fullName":"Stream: retryable error smoke emits error event with type=RETRYABLE and closes","status":"passed","title":"emits error event with type=RETRYABLE and closes","duration":4.359415999999953,"failureMessages":[],"meta":{}}],"startTime":1759190864190,"endTime":1759190864194.3594,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/stream.retryable.test.ts"},{"assertionResults":[{"ancestorTitles":["Error Message Catalogue"],"fullName":"Error Message Catalogue maps BAD_INPUT (generic schema) to legacy phrase","status":"passed","title":"maps BAD_INPUT (generic schema) to legacy phrase","duration":1.8484579999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error Message Catalogue"],"fullName":"Error Message Catalogue maps BAD_INPUT with explicit key to that phrase","status":"passed","title":"maps BAD_INPUT with explicit key to that phrase","duration":0.17420799999999304,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error Message Catalogue"],"fullName":"Error Message Catalogue maps RATE_LIMIT to legacy RPM phrase","status":"passed","title":"maps RATE_LIMIT to legacy RPM phrase","duration":0.07354100000000585,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error Message Catalogue"],"fullName":"Error Message Catalogue maps INVALID_TEMPLATE to 404 with the legacy phrase","status":"passed","title":"maps INVALID_TEMPLATE to 404 with the legacy phrase","duration":0.16229099999998198,"failureMessages":[],"meta":{}},{"ancestorTitles":["Error Message Catalogue"],"fullName":"Error Message Catalogue preserves taxonomy and status expectations at call sites (example snapshot)","status":"passed","title":"preserves taxonomy and status expectations at call sites (example snapshot)","duration":4.362833000000023,"failureMessages":[],"meta":{}}],"startTime":1759190864026,"endTime":1759190864032.3628,"status":"passed","message":"","name":"/Users/paulslee/Documents/GitHub/plot-lite-service/tests/contracts/error-messages.catalogue.test.ts"}]}
